<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
</head>
    <body style="padding: 10px 50px; margin: 0;">
        <h2>Documentation</h2>
        <div style="max-width: 1200px; width: 100%; margin: 20px auto;">
            <p style="font-size: 20px; font-style: italic;">method <b>GET</b></p>
            <i>/api/adminp/</i> - Все зарегистрированные админки и их данные
            <br>
            <i>/api/adminp/x</i> (где x - id админки) - админка с id <b>x</b> и ее данные
            <br>
            <i>/api/adminp/x/page/y</i> (где x - id админки, y - id страницы) - Страница/LP с id <b>y</b> и ее данные
            <br>
            <i>/api/adminp/x/page/y/scenarios/z</i> (где x - id админки, y - id страницы, z - id сценария)
            - Сценарий с id <b>z</b> и его данные
            <br>
            <br>
            <p style="font-size: 20px; font-style: italic;">method <b>POST</b></p>
            <i>/api/adminp/</i> - регистрация новой админки. Params: {host: name} name - доменное имя админки
            <br>
            <i>/api/adminp/x/page</i> (где x - id админки) - добавление новой страницы/LP. Params: {url: name} name - ссылка на LP
            <br>
            <i>/api/adminp/x/page/y/scenario</i> (где x - id админки, y - id страницы) - добавление нового сценария.
            Params: {popup_id: ppid, steps: steps_arr, filters: filters_arr}
            ppid - id popup'а, steps_arr - массив JSON объектов с шагами, filters_arr - массив JSON объектов с фильтрами
            <br>
            <br>
            <p style="font-size: 20px; font-style: italic;">method <b>DELETE</b></p>
            <i>/api/adminp/x</i> (где x - id админки) - Удаление админки с id <b>x</b> и ее данные
            <br>
            <i>/api/adminp/x/page/y</i> (где x - id админки, y - id страницы) - Удаление страницы/LP с id <b>y</b> и ее данные
            <br>
            <i>/api/adminp/x/page/y/scenario/z</i> (где x - id админки, y - id страницы, z - id сценария)
            - Удаление сценария с id <b>z</b> и его данные
            <br>

        </div>
        <button onclick="testQuery();">test Query</button>
        <script>
            function testQuery() {

                var XHR = ("onload" in new XMLHttpRequest()) ? XMLHttpRequest : XDomainRequest;

                var xhr = new XHR();
                var json = JSON.stringify({
                    "url" : "https://t.s"
                });
                /*var json = JSON.stringify({
                    scenario_id: 3,
                    popup_id: 33,
                    steps: [
                        {
                            step_id : 1,
                            parameter : 50
                        },
                        {

                            parameter : 80
                        }],
                    filters: {
                        geo : {},
                        device : {},
                        time_table: {
                            "Monday":{"h0":"on","h1":"on","h2":"on","h3":"on","h4":"on","h5":"on","h6":"on","h7":"on","h8":"on","h9":"on","h10":"on","h11":"on","h12":"on","h13":"on","h14":"on","h15":"on","h16":"on","h17":"on","h18":"on","h19":"on","h20":"on","h21":"on","h22":"on","h23":"on"},
                            "Tuesday":{"h0":"on","h1":"on","h2":"on","h3":"on","h4":"on","h5":"on","h6":"on","h7":"on","h8":"on","h9":"on","h10":"on","h11":"on","h12":"on","h13":"on","h14":"on","h15":"on","h16":"on","h17":"on","h18":"on","h19":"on","h20":"on","h21":"on","h22":"on","h23":"on"},
                            "Wednesday":{"h0":"on","h1":"on","h2":"on","h3":"on","h4":"on","h5":"on","h6":"on","h7":"on","h8":"on","h9":"on","h10":"on","h11":"on","h12":"on","h13":"on","h14":"on","h15":"on","h16":"on","h17":"on","h18":"on","h19":"on","h20":"on","h21":"on","h22":"on","h23":"on"},
                            "Thursday":{"h0":"on","h1":"on","h2":"on","h3":"on","h4":"on","h5":"on","h6":"on","h7":"on","h8":"on","h9":"on","h10":"on","h11":"on","h12":"on","h13":"on","h14":"on","h15":"on","h16":"on","h17":"on","h18":"on","h19":"on","h20":"on","h21":"on","h22":"on","h23":"on"},
                            "Friday":{"h0":"on","h1":"on","h2":"on","h3":"on","h4":"on","h5":"on","h6":"on","h7":"on","h8":"on","h9":"on","h10":"on","h11":"on","h12":"on","h13":"on","h14":"on","h15":"on","h16":"on","h17":"on","h18":"on","h19":"on","h20":"on","h21":"on","h22":"on","h23":"on"},
                            "Saturday":{"h0":"on","h1":"on","h2":"on","h3":"on","h4":"on","h5":"on","h6":"on","h7":"on","h8":"on","h9":"on","h10":"on","h11":"on","h12":"on","h13":"on","h14":"on","h15":"on","h16":"on","h17":"on","h18":"on","h19":"on","h20":"on","h21":"on","h22":"on","h23":"on"},
                            "Sunday":{"h0":"on","h1":"on","h2":"on","h3":"on","h4":"on","h5":"on","h6":"on","h7":"on","h8":"on","h9":"on","h10":"on","h11":"on","h12":"on","h13":"on","h14":"on","h15":"on","h16":"on","h17":"on","h18":"on","h19":"on","h20":"on","h21":"on","h22":"on","h23":"on"}
                            },
                        user_access : {new : 0, old : 1}
                    }
                });*/
                /*var json = JSON.stringify({
                    popup_id: 1,
                    steps: [{step_id:1,parameter:55}],
                    filters: {geo: {},
                        device: {},
                        time_table: {},
                        user_access: {new: 0,old: 1}}});*/

                /*xhr.open('delete', '/api/adminp/asdsa', true);*/
                xhr.open('post', '/api/adminp/4/page', true);
                /*xhr.open('post', '/api/adminp/4/page/2/scenario', true);*/
                /*xhr.open('post', 'http://localhost:8080/api/adminp/', true);*/
                /*xhr.open('GET', 'http://magic.com/', true);*/
                /*xhr.open('GET', 'http://reg.com/api/adminp/4/page/2', true);*/

                xhr.onload = function() {
                    console.log('this : ', this);
                    console.log('this : ', this.responseText);
                    alert( this.responseText );
                };

                xhr.onerror = function() {
                    alert( 'Ошибка ' + this.status );
                };

                xhr.send(json);

            }
        </script>
    </body>
</html>